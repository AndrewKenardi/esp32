<form id="loginForm">
  <input type="email" id="username" placeholder="Username" required />
  <input type="password" id="password" placeholder="Password" required />
  <button type="submit">Login</button>
</form>

<script type="module">
  import { auth } from './firebase.js';
  import { signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js';

  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const username = document.getElementById("username").value;
    const password = document.getElementById("pass").value;

    try {
      await signInWithEmailAndPassword(auth, username, pass);
      const redirect = localStorage.getItem('redirectAfterLogin');
      if (redirect) {
        localStorage.removeItem('redirectAfterLogin');
        window.location.href = redirect;
      } else {
        window.location.href = 'index.html';
      }
    } catch (error) {
      alert("Login gagal: " + error.message);
    }
  });
</script>
